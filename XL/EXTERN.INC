;--------------------------------------------------------
; EXTERNALS DEFINITION FILE
;
; ------------------ XDOS 2.0 ---------------------------
;      CODED IN JUNE/JULY 1997 BY JOŽO PINHEIRO
;--------------------------------------------------------

;-------------------------------------------------
SEGMENT16 SEGMENT PARA PUBLIC USE16

EXTRN System_Flags:BYTE       ; Bits: 0-XMS/1-VCPI/2-DPMI
EXTRN Free_Paragraphs:WORD    ; N§ de par grafos livres
EXTRN DOS_version:WORD        ; Vers„o do MS-DOS

EXTRN PSP_Seg:WORD		; Segmento do PSP do programa
EXTRN OLDCS:WORD		; Segmento CS RM
EXTRN OLDSS:WORD		; Segmento SS RM
EXTRN OLDSP:WORD		; Valor de SP RM

EXTRN SPSP:WORD			;PSP selector
EXTRN SCODE16:WORD		;SEGMENT16 code selector
EXTRN SDATA16:WORD		;SEGMENT16 data selector
EXTRN SSTACK16:WORD		;Initial Stack Selector

;==================================================

EXTRN DPMI_VERSION:WORD 	;DPMI server version
EXTRN DPMI_FLAGS:WORD		;DPMI flags

EXTRN MASTER_VPIC:BYTE		;Virtual master pic settings
EXTRN SLAVE_VPIC:BYTE		;Virtual slave pic settings
EXTRN DPMI_XTENDED:BYTE		;DPMI extended capabilities (V1.0+)
EXTRN DPMI_XSTRUC:DPMI_CAPABILITIES		;DPMI extended capabilities info
EXTRN SEL_INCVAL:WORD		;Selectors increment value

EXTRN CPU_TYPE:BYTE		;CPU TYPE NUMBER
EXTRN CPUID_ABLE:BYTE
EXTRN CPU_FEATURES:DWORD
EXTRN CPU_MODEL:BYTE
EXTRN CPU_FAMILY:BYTE
EXTRN CPU_STEPPING:BYTE


SEGMENT16 ENDS
;-------------------------------------------------
;-------------------------------------------------
SEGMENT32 SEGMENT PARA PUBLIC USE32

EXTRN SDATA32:WORD		;SEGMENT32 data selector
EXTRN SCODE32:WORD		;SEGMENT32 code selector
EXTRN SSTACK32:WORD		;Stack32 Selector
EXTRN SDATA0:WORD		;FLAT segment

EXTRN SEG16:LONG		;LINEAR SEG16 ADDX

;===================================

EXTRN SYS_ERRORHANDLER:DWORD	;SYSTEM ERROR HANDLER OFFSET IN CS

EXTRN ERRORFLAG:BYTE	;SYSTEM ERROR FLAG
EXTRN DPMI1_ERROR:WORD	;DPMI 1.0+ ERROR CODE
EXTRN DPMI_ERROR:WORD	;DPMI 0.9 FN CODE

;===================================

EXTRN REGSTRUC:REGISTERS ;ESTRUTURA INTERNA DOS REGISTOS
EXTRN R_RES:WORD	 ;REGISTO ES
EXTRN R_RDS:WORD	 ;REGISTO DS
EXTRN R_RCS:WORD	 ;REGISTO CS
EXTRN R_IP:WORD		 ;REGISTO IP

;===================================	INIT_VIDEO DATA STRUCTURE

EXTRN INIT_MODE:BYTE
EXTRN DISPL:BYTE
EXTRN ADAPTER:BYTE
EXTRN CURRPAGE:BYTE
EXTRN ROWS:BYTE
EXTRN COLS:BYTE
EXTRN TXT_LINADDX:DWORD

;-------------------------------------------------
;PROCEDURES
;-------------------------------------------------

EXTRN _EH_DPMI_01 : NEAR
EXTRN GET_RMINTVEC : NEAR
EXTRN SET_RMINTVEC : NEAR
EXTRN GET_EXCEPTION : NEAR
EXTRN SET_EXCEPTION : NEAR
EXTRN GET_INTVEC : NEAR
EXTRN SET_INTVEC : NEAR
EXTRN RM_INT : NEAR
EXTRN CALL_RM: : NEAR
EXTRN CALL_RMINT : NEAR
EXTRN ALLOC_CALLBACK : NEAR
EXTRN FREE_CALLBACK : NEAR
EXTRN DPMI_MEM_INFO : NEAR
EXTRN GETMEM : NEAR
EXTRN FREEMEM : NEAR
EXTRN RESIZEMEM : NEAR
EXTRN LOCK_REGION : NEAR
EXTRN UNLOCK_REGION : NEAR
EXTRN MARK_RM_PAGEABLE : NEAR
EXTRN RELOCK_REGION : NEAR
EXTRN GET_PAGESIZE : NEAR
EXTRN MAP_PHISICAL_ADDX : NEAR
EXTRN ALLOC_DESCRIPTORS : NEAR
EXTRN FREE_DESCRIPTOR : NEAR
EXTRN SEG2DESCR : NEAR
EXTRN GET_BASE : NEAR
EXTRN SET_BASE : NEAR
EXTRN SET_LIMIT : NEAR
EXTRN SET_AR : NEAR
EXTRN MAKE_ALIAS : NEAR
EXTRN GET_DESCR : NEAR
EXTRN SET_DESCR : NEAR
EXTRN GETDOSMEM : NEAR
EXTRN FREEDOSMEM : NEAR
EXTRN RESIZEDOSMEM : NEAR
EXTRN SET_WATCHPOINT : NEAR
EXTRN CLEAR_WATCHPOINT : NEAR
EXTRN GET_WATCHPOINT_STATE : NEAR
EXTRN RESET_WATCHPOINT : NEAR
EXTRN VCLI : NEAR
EXTRN VSTI : NEAR
EXTRN GET_VI : NEAR
EXTRN MOVE : NEAR
EXTRN MOVEW : NEAR
EXTRN MOVED : NEAR
;-------------------------------------------------

SEGMENT32 ENDS
;-------------------------------------------------
